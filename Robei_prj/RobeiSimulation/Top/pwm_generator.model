<!DOCTYPE Robei>
<Module Comment="" Height="600" Y="0" Class="module" Color="#d3d3d3" Type="module" Parameters="" Code="&#xa;&#x9;&#xa;&#x9;&#xa;&#x9;&#x9;reg [31:0]pwm_gen_cnt;   //定义32位产生pwm的计数器&#xa;&#x9;&#xa;&#x9;&#x9;always@(posedge Clk or posedge Rst_n)&#xa;&#x9;&#x9;if(!Rst_n )&#xa;&#x9;&#x9;&#x9;pwm_gen_cnt &lt;= 32'd1;&#xa;&#x9;&#x9;else if(pwm_gen_en)&#xa;&#x9;&#x9;begin&#xa;&#x9;&#x9;&#x9;if(pwm_gen_cnt &lt;= 32'd1)&#xa;&#x9;&#x9;&#x9;&#x9;pwm_gen_cnt &lt;= counter_arr;       //计数减到1，加载预重装寄存器值&#xa;&#x9;&#x9;&#x9;else&#xa;&#x9;&#x9;&#x9;&#x9;pwm_gen_cnt &lt;= pwm_gen_cnt - 1'b1;//计数器自减1&#xa;&#x9;&#x9;end&#xa;&#x9;&#x9;else&#xa;&#x9;&#x9;&#x9;pwm_gen_cnt &lt;= counter_arr;&#x9;        //未使能时，计数器值等于预重装寄存器值&#xa;&#x9;&#xa;&#x9;&#x9;always@(posedge Clk or posedge Rst_n)&#xa;&#x9;&#x9;if(!Rst_n )                          //复位时，PWM输出低电平&#xa;&#x9;&#x9;&#x9;pwm_out &lt;= 1'b0;&#xa;&#x9;&#x9;else if(pwm_gen_cnt &lt;= counter_ccr)   //计数值小于比较值，PWM输出高电平&#xa;&#x9;&#x9;&#x9;pwm_out &lt;= 1'b1;&#xa;&#x9;&#x9;else&#xa;&#x9;&#x9;&#x9;pwm_out &lt;= 1'b0;                    //计数值大于比较值，PWM输出低电平" Width="900" Include="" X="0" File="Current/pwm_generator.model" Parent="0" Name="pwm_generator">
 <Port Height="20" Y="0.125" Color="#faebd7" Inout="input" Datatype="wire" Datasize="1" Side="left" Function="" Width="20" X="-0.0222222" Parent="pwm_generator" Name="Clk"/>
 <Port Height="20" Y="0.266667" Color="#00ffff" Inout="input" Datatype="wire" Datasize="1" Side="left" Function="" Width="20" X="-0.0222222" Parent="pwm_generator" Name="Rst_n"/>
 <Port Height="20" Y="0.408333" Color="#7fffd4" Inout="input" Datatype="wire" Datasize="1" Side="left" Function="" Width="20" X="-0.0222222" Parent="pwm_generator" Name="pwm_gen_en"/>
 <Port Height="20" Y="0.55" Color="#f0ffff" Inout="input" Datatype="wire" Datasize="32" Side="left" Function="" Width="20" X="-0.0222222" Parent="pwm_generator" Name="counter_arr"/>
 <Port Height="20" Y="0.691667" Color="#f5f5dc" Inout="input" Datatype="wire" Datasize="32" Side="left" Function="" Width="20" X="-0.0222222" Parent="pwm_generator" Name="counter_ccr"/>
 <Port Height="20" Y="0.316667" Color="#ffe4c4" Inout="output" Datatype="reg" Datasize="1" Side="right" Function="" Width="20" X="0.977778" Parent="pwm_generator" Name="pwm_out"/>
</Module>
