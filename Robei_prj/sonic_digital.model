<!DOCTYPE Robei>
<Module Comment="" Class="module" Y="0" Color="#d3d3d3" Parameters="" Parent="0" Include="" Height="600" Width="900" Type="module" X="0" File="Current/sonic_digital.model" Code="&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;reg [3:0] temp_decade;&#xa;&#x9;&#x9;reg [3:0] temp_unit;&#xa;&#x9;&#x9;&#x9;    parameter CNT_clk_1KHz=166_666,&#xa;&#x9;&#x9;&#x9;              CNT_clk_4KHz=41_666;&#xa;&#x9;&#x9;&#x9;    parameter ZERO=8'b0011_1111,   // 8'h3f&#xa;&#x9;&#x9;&#x9;              ONE=8'b0000_0110,    // 8'h06&#xa;&#x9;&#x9;&#x9;              TWO=8'b0101_1011,    //8'h5b&#xa;&#x9;&#x9;&#x9;              THREE=8'b0100_1111,    //8'h4f&#xa;&#x9;&#x9;&#x9;              FOUR=8'b0110_0110,    //8'h66&#xa;&#x9;&#x9;&#x9;              FIVE=8'b0110_1101,    //8'h6d&#xa;&#x9;&#x9;&#x9;              SIX=8'b0111_1101,     //8'h7d&#xa;&#x9;&#x9;&#x9;              SEVEN=8'b0000_0111,    //8'h07&#xa;&#x9;&#x9;&#x9;              EIGHT=8'b0111_1111,    //8'h7f&#xa;&#x9;&#x9;&#x9;              NINE=8'b0110_1111,     //8'h6f&#x9;&#x9;&#x9;&#x9;&#x9;  &#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;  A=8'b0111_0111,    //8'h77&#xa;&#x9;&#x9;&#x9;              B=8'b0111_1100,    //8'h7c&#xa;&#x9;&#x9;&#x9;              C=8'b0011_1001,     //8'h39&#xa;&#x9;&#x9;&#x9;              D=8'b0101_1110,    //8'h5e&#xa;&#x9;&#x9;&#x9;              E=8'b0111_1001,    //8'h79&#xa;&#x9;&#x9;&#x9;              F=8'b0111_0001;     //8'h71&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;always @(posedge Clk or negedge Rst_n)begin&#xa;&#x9;&#xa;&#x9;&#x9;&#x9;&#x9;if(!Rst_n)begin&#xa;&#x9;&#x9;&#x9;           temp_decade&lt;=0;&#xa;&#x9;&#x9;&#x9;           temp_unit&lt;=0;&#xa;&#x9;&#x9;&#x9;       end&#xa;&#x9;&#x9;&#x9;    else begin&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;temp_decade&lt;=temp_data/10;&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;temp_unit&lt;=temp_data%10;&#x9;&#xa;&#x9;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;&#x9;end&#xa;&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;  &#xa;&#x9;&#x9;&#x9;reg [15:0] cnt_sel;&#xa;&#x9;&#x9;&#x9;reg [2:0]  cnt_timer;&#xa;&#x9;&#x9;&#x9;   // timer&#xa;&#x9;&#x9;&#x9;   always @(posedge Clk or negedge Rst_n)begin&#xa;&#x9;&#x9;&#x9;       if(!Rst_n)begin&#xa;&#x9;&#x9;&#x9;           cnt_sel&lt;=16'b0;&#xa;&#x9;&#x9;&#x9;           cnt_timer&lt;=3'b000;&#xa;&#x9;&#x9;&#x9;       end&#xa;&#x9;&#x9;&#x9;       else if (cnt_sel==CNT_clk_4KHz)begin     &#xa;&#x9;&#x9;&#x9;           cnt_sel&lt;=16'b0;&#xa;&#x9;&#x9;&#x9;           if(cnt_timer&lt;3'd2)&#xa;&#x9;&#x9;&#x9;               cnt_timer&lt;=cnt_timer+1;&#xa;&#x9;&#x9;&#x9;           else&#xa;&#x9;&#x9;&#x9;               cnt_timer&lt;=3'b000;           &#xa;&#x9;&#x9;&#x9;       end&#xa;&#x9;&#x9;&#x9;       else begin&#xa;&#x9;&#x9;&#x9;           cnt_sel&lt;=cnt_sel+1;&#xa;&#x9;&#x9;&#x9;           cnt_timer&lt;=cnt_timer;&#xa;&#x9;&#x9;&#x9;       end&#xa;&#x9;&#x9;&#x9;   end&#xa;&#x9;&#x9;&#x9;  //sel&#xa;&#x9;&#x9;&#x9;  always@(*)begin&#xa;&#x9;&#x9;&#x9;      if(!Rst_n)&#xa;&#x9;&#x9;&#x9;          sel&lt;=4'b1111;&#xa;&#x9;&#x9;&#x9;      else&#xa;&#x9;&#x9;&#x9;          case(cnt_timer)&#xa;&#x9;&#x9;&#x9;              3'd0:begin&#xa;&#x9;&#x9;&#x9;                  sel&lt;=4'b1110; &#xa;&#x9;&#x9;&#x9;              end&#xa;&#x9;&#x9;&#x9;              3'd1:begin&#xa;&#x9;&#x9;&#x9;                  sel&lt;=4'b1101;&#xa;&#x9;&#x9;&#x9;              end&#xa;&#x9;&#x9;&#x9;              3'd2:begin&#xa;&#x9;&#x9;&#x9;                  sel&lt;=4'b0111;&#xa;&#x9;&#x9;&#x9;              end&#xa;  &#xa;&#x9;&#x9;&#x9;              default:    ;&#xa;&#x9;&#x9;&#x9;          endcase&#xa;&#x9;&#x9;&#x9;  end &#xa;&#x9;&#x9;&#x9;   &#xa;&#x9;&#x9;&#x9;   // led_data&#xa;&#x9;&#x9;&#x9;   always @(posedge Clk or negedge Rst_n)begin&#xa;&#x9;&#x9;&#x9;       if(!Rst_n)&#xa;&#x9;&#x9;&#x9;           led_data&lt;=8'b0000_0000;&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;       else if (sel==4'b0111)&#xa;&#x9;&#x9;&#x9;          case(color_data)&#xa;&#x9;&#x9;&#x9;            8'd1:    led_data&lt;=A;&#xa;&#x9;&#x9;&#x9;            8'd2:    led_data&lt;=B;&#xa;&#x9;&#x9;&#x9;            8'd3:    led_data&lt;=C;&#xa;&#x9;&#x9;&#x9;            8'd4:    led_data&lt;=D;&#xa;&#x9;&#x9;&#x9;            8'd5:    led_data&lt;=E;&#xa;&#x9;&#x9;&#x9;            8'd6:    led_data&lt;=F;&#xa;&#x9;&#x9;&#x9;            default:    led_data&lt;=8'h00;&#xa;&#x9;&#x9;&#x9;         endcase&#x9;&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#xa;&#x9;&#xa;&#x9;&#x9;&#x9;        else if (sel==4'b1101)&#xa;&#x9;&#x9;&#x9;          case(temp_unit)&#xa;&#x9;&#x9;&#x9;            4'd0:    led_data&lt;=ZERO;&#xa;&#x9;&#x9;&#x9;            4'd1:    led_data&lt;=ONE;&#xa;&#x9;&#x9;&#x9;            4'd2:    led_data&lt;=TWO;&#xa;&#x9;&#x9;&#x9;            4'd3:    led_data&lt;=THREE;&#xa;&#x9;&#x9;&#x9;            4'd4:    led_data&lt;=FOUR;&#xa;&#x9;&#x9;&#x9;            4'd5:    led_data&lt;=FIVE;&#xa;&#x9;&#x9;&#x9;            4'd6:    led_data&lt;=SIX;&#xa;&#x9;&#x9;&#x9;            4'd7:    led_data&lt;=SEVEN;&#xa;&#x9;&#x9;&#x9;            4'd8:    led_data&lt;=EIGHT;&#xa;&#x9;&#x9;&#x9;            4'd9:    led_data&lt;=NINE;&#xa;&#x9;&#x9;&#x9;         default:    led_data&lt;=8'h00;&#xa;&#x9;&#x9;&#x9;         endcase&#xa;&#x9;&#x9;&#x9;         else if (sel==4'b1110)&#xa;&#x9;&#x9;&#x9;          case(temp_decade)&#xa;&#x9;&#x9;&#x9;            4'd0:    led_data&lt;=ZERO;&#xa;&#x9;&#x9;&#x9;            4'd1:    led_data&lt;=ONE;&#xa;&#x9;&#x9;&#x9;            4'd2:    led_data&lt;=TWO;&#xa;&#x9;&#x9;&#x9;            4'd3:    led_data&lt;=THREE;&#xa;&#x9;&#x9;&#x9;            4'd4:    led_data&lt;=FOUR;&#xa;&#x9;&#x9;&#x9;            4'd5:    led_data&lt;=FIVE;&#xa;&#x9;&#x9;&#x9;            4'd6:    led_data&lt;=SIX;&#xa;&#x9;&#x9;&#x9;            4'd7:    led_data&lt;=SEVEN;&#xa;&#x9;&#x9;&#x9;            4'd8:    led_data&lt;=EIGHT;&#xa;&#x9;&#x9;&#x9;            4'd9:    led_data&lt;=NINE;&#xa;&#x9;&#x9;&#x9;         default:    led_data&lt;=8'h00;&#xa;&#x9;&#x9;&#x9;         endcase        &#xa;&#x9;&#x9;&#x9;        else&#xa;&#x9;&#x9;&#x9;            led_data&lt;=8'h00;&#xa;&#x9;&#x9;&#x9;   end" Name="sonic_digital">
 <Port Inout="input" Y="0.15" Datasize="1" Color="#ff0000" Function="" Parent="sonic_digital" Side="left" Height="20" Width="20" X="-0.0222222" Name="Clk" Datatype="wire"/>
 <Port Inout="input" Y="0.316667" Datasize="1" Color="#ffff00" Function="" Parent="sonic_digital" Side="left" Height="20" Width="20" X="-0.0222222" Name="Rst_n" Datatype="wire"/>
 <Port Inout="input" Y="0.483333" Datasize="8" Color="#ffa500" Function="" Parent="sonic_digital" Side="left" Height="20" Width="20" X="-0.0222222" Name="temp_data" Datatype="wire"/>
 <Port Inout="input" Y="0.65" Datasize="8" Color="#d2b48c" Function="" Parent="sonic_digital" Side="left" Height="20" Width="20" X="-0.0222222" Name="color_data" Datatype="wire"/>
 <Port Inout="output" Y="0.233333" Datasize="4" Color="#ffc0cb" Function="" Parent="sonic_digital" Side="right" Height="20" Width="20" X="0.977778" Name="sel" Datatype="reg"/>
 <Port Inout="output" Y="0.483333" Datasize="8" Color="#800080" Function="" Parent="sonic_digital" Side="right" Height="20" Width="20" X="0.977778" Name="led_data" Datatype="reg"/>
</Module>
